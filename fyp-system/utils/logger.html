<?php
class Logger {
    private $logFile;
    private $logLevels = ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"];

    public function __construct($logFile = "../logs/app.log") {
        // Ensure the logs directory exists
        $logDir = dirname($logFile);
        if (!is_dir($logDir)) {
            mkdir($logDir, 0777, true);
        }

        $this->logFile = $logFile;
    }

    public function log($message, $level = "INFO") {
        $level = strtoupper($level);

        // Validate log level
        if (!in_array($level, $this->logLevels)) {
            $level = "INFO";
        }

        $logMessage = "[" . $level . "][" . date("Y-m-d H:i:s") . "] $message" . PHP_EOL;
        file_put_contents($this->logFile, $logMessage, FILE_APPEND);
    }

    // Convenience methods for specific log levels
    public function debug($message) {
        $this->log($message, "DEBUG");
    }

    public function info($message) {
        $this->log($message, "INFO");
    }

    public function warning($message) {
        $this->log($message, "WARNING");
    }

    public function error($message) {
        $this->log($message, "ERROR");
    }

    public function critical($message) {
        $this->log($message, "CRITICAL");
    }
}
?>
